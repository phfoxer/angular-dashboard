<div class="page-title" *ngIf="!loaded">
  Nova permissão
  <span>Gerenciar permissões de grupos de usuários</span>
</div>
<form novalidate class="form" *ngIf="!loaded">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-sm">
          <div class="form-group">
            <label class="required">Perfil</label>
            <ng-select laceholder="Selecione" [(ngModel)]="permission.role_id" name="permission.role_id" [items]="roles" bindLabel="name" bindValue="id">
            </ng-select>
          </div>
        </div>
        <div class="col-sm">
          <div class="form-group">
            <label class="required">Menu</label>
              <ng-select laceholder="Selecione" [(ngModel)]="permission.menu_id" name="permission.menu_id" [items]="menus" bindLabel="name" bindValue="id">
              </ng-select>
          </div>
        </div>
      </div>

      <div class="row text-left">

        <div class="col" *ngFor="let action of permissionAction">
          <div class="form-group">
            <label>
              {{action.description}}
            </label>
            <input-checkbox *ngIf="action.name" [checked]="permission.permission[action.name]" (value)="setPermission($event,action.name)"></input-checkbox>
          </div>
        </div>

      </div>
    </div>
    <div class="card-footer">
      <div class="form-group">
        <button type="submit" *ngIf="!permission.id" class="btn btn-sm btn-success mr-2" (click)="onSubmit($event)">Salvar e continuar</button>
        <button type="submit" *ngIf="permission.id" class="btn btn-sm btn-primary mr-2" (click)="onSubmit($event)">Salvar e continuar</button>
        <a [routerLink]="['/painel/permission/list']" class="btn btn-sm btn-link">Voltar</a>
      </div>
    </div>
  </div>
</form>
<app-loader [load]="loaded"></app-loader>